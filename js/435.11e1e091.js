"use strict";(self["webpackChunkshopvue"]=self["webpackChunkshopvue"]||[]).push([[435],{2435:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("van-nav-bar",{attrs:{fixed:"",title:"商品评价","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),e("van-tabs",{attrs:{sticky:""},on:{click:t.changeTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("van-tab",{attrs:{title:"全部（"+t.commentAll+"）",name:"-1"}}),e("van-tab",{attrs:{title:"好评（"+t.commentPraise+"）",name:"10"}}),e("van-tab",{attrs:{title:"中评（"+t.commentReview+"）",name:"20"}}),e("van-tab",{attrs:{title:"差评（"+t.commentNegative+"）",name:"30"}})],1),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.commentList,(function(t,a){return e("CommentItem",{key:a,attrs:{commentItem:t}})})),1)],1)},s=[],n=a(4471);const m=(t,e,a)=>(0,n.Z)({url:"/comment/list",params:{goodsId:t,scoreType:e,page:a}}),o=t=>(0,n.Z)({url:"/comment/total",params:{goodsId:t}});var c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-item"},[e("div",{staticClass:"top"},[e("img",{attrs:{src:t.commentItem.user.avatar_url||t.defaultAvatar,alt:""}}),e("div",{staticClass:"name"},[t._v(t._s(t.commentItem.user.nick_name))]),e("van-rate",{attrs:{size:16,value:t.scoreRate(t.commentItem.score),color:"#ffd21e","void-icon":"star","void-color":"#eee"}})],1),e("div",{staticClass:"content"},[t._v(" "+t._s(t.commentItem.content)+" ")]),t.commentItem.is_picture?e("div",t._l(t.commentItem.images,(function(a,i){return e("img",{key:i,staticClass:"userImg-small",attrs:{src:a.image_url,alt:""},on:{click:function(e){return t.showBigImg(i)}}})})),0):t._e(),e("van-popup",{model:{value:t.isShowBigImg,callback:function(e){t.isShowBigImg=e},expression:"isShowBigImg"}},[e("img",{staticClass:"userImg-large",attrs:{src:t.clickedImg_url,alt:""}})]),e("div",{staticClass:"time"},[t._v(" "+t._s(t.commentItem.create_time)+" ")])],1)},r=[],l=a(6945),d={name:"CommentItem",data(){return{defaultAvatar:l,isShowBigImg:!1,clickedImg_url:""}},props:{commentItem:{required:!0}},methods:{scoreRate(t){return 10===t?5:20===t?3:30===t?1:0},showBigImg(t){this.isShowBigImg=!0,this.clickedImg_url=this.commentItem.images[t].image_url}}},u=d,h=a(1001),g=(0,h.Z)(u,c,r,!1,null,"54f50818",null),v=g.exports,I={name:"CommentList",components:{CommentItem:v},data(){return{activeName:-1,goodsId:this.$route.query.goodsId,page:1,commentData:{},commentList:[],loading:!1,finished:!1,commentAll:0,commentPraise:0,commentReview:0,commentNegative:0}},methods:{async getCommentList(){const{data:{list:t}}=await m(this.goodsId,this.activeName,this.page);this.commentData=t,this.commentList=this.commentList.concat(t.data),this.loading=!1,this.page++,this.commentList.length>=this.commentData.total&&(this.finished=!0)},async onLoad(){await this.getCommentList()},async changeTab(t){this.activeName=t,this.commentData={},this.commentList=[],this.page=1,this.loading=!0,this.finished=!1,await this.onLoad()},async getCommentNum(){const{data:{total:t}}=await o(this.goodsId);this.commentAll=t.all,this.commentPraise=t.praise,this.commentReview=t.review,this.commentNegative=t.negative}},created(){this.getCommentNum()}},A=I,f=(0,h.Z)(A,i,s,!1,null,"2e05097b",null),p=f.exports},6945:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkBAMAAACCzIhnAAAAKlBMVEXp6en////9/f3o6Ojw8PDj4+Pl5eXh4eHs7Oz7+/v09PTy8vL4+Pj29vY+GdZKAAADDElEQVRYw+3Wv0sbYRjA8ZNwp+Li89YhUQO+b6F0PDTx6NBBtHXpcBDPRkvhakiC1CGghqIIyRCdOqQlHdouUoqlm1Co0KUZhK4tFPvn9MnF5n6+P4R2KT6EhJe8n3y5ewOJduXJXZNr8l+Tecd5uFu6CinbS18+LR06pjJxxl4ATuZD2anMaXMKxHkOl/P6LFVxCnJi3YXAvP34zZWR1A6E54aUVI8j5J4mIcZBRExLr8WKRk5cGdmHyFyYEqI3o2SqJiH5NkRHl5B9iE3HFBJjI07StpDoC3Ey7QrJfBviYwiJCwmzLCQ7SeRCSNaTyEtTQFKbSSTtishsIrEFxBi6Jn+FFAWk+iSR1PnEyHWTSObM5pJSG5KnxSWPgDMdk0ce88gMl6zzyE0uWRnsoWFyziUubiWMAiMM8AmdtwT4zL38fJcxRnAXw6EI+0sGBpfoTUJIbxfF6ZnL5aTNP/0DklSht1w+KVFK4xVY1vjkqEkSKtltAdH2IF6Bjisi1vd4BfSGiByukWiFjtvi35dKO1qBI01M8AZEKtmahKQ2wxVK07aEaCuRCj3XZKTSDl8L6FIyPESCFZisSYm2F76Wjisn5TZlgYrekJPWLPErdKKm8kfxGfgVODFVyHATBpXJbU2FpDYGdwzGi2rkzqBC064a2fIrSP5VZTZQsZVIa8i/Y1M1JTJ86p9LZrWhdpSB01c6SqtJ/ApM1RtSYmDErzB4b0uJc0qYXyEsUzUlpDoKNFgh9LZjCkn1KTAWqhD4umvyScrJUULDFTTvsMMhxu4YimiFUfhVLSSTvPsAUMQqhMKbw0ICGckXf3giVsEHZO6vxsiIVewC7kqsUAZksR4lerENjPAquCCLhTAxtrv4Lr+CT6Rlh4hzCpSKKozQrGUGiDUKjIkrjMBEvTEg+FXsfyJWiLfRm96LV+unGPy0B6R83NuI73qAeKq/9h4epjgZ6w/Rt8Db2EeBCq4DFdQztUuy2mWKA0d9oq8RVULTNY+UMaKcyfdIao+oE/rKRqIvsCtMtpT7DVEPKD7Ga13IAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=435.11e1e091.js.map