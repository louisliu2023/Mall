{"version":3,"file":"js/761.6fa37261.js","mappings":"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","sources":["webpack://shopvue/./src/views/Address/EditAdd.vue","webpack://shopvue/src/views/Address/EditAdd.vue","webpack://shopvue/./src/views/Address/EditAdd.vue?7506","webpack://shopvue/./src/views/Address/EditAdd.vue?4018"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"title\":\"修改收货地址\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),_c('van-form',{attrs:{\"show-error\":false},on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"name\":\"name\",\"label\":\"收货人\",\"placeholder\":\"名字\",\"rules\":[{ required: true, message: '请填写收货人姓名' }],\"clearable\":\"\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"name\"}}),_c('van-field',{attrs:{\"type\":\"digit\",\"name\":\"phone\",\"label\":\"手机号码\",\"placeholder\":\"手机号\",\"rules\":[\n        {\n          required: true,\n          pattern: /^1[3-9]\\d{9}$/,\n          message: '请输入正确的手机号',\n        },\n      ],\"clearable\":\"\"},model:{value:(_vm.phone),callback:function ($$v) {_vm.phone=$$v},expression:\"phone\"}}),_c('van-field',{attrs:{\"readonly\":\"\",\"clickable\":\"\",\"name\":\"picker\",\"value\":_vm.area,\"label\":\"所在地区\",\"placeholder\":\"点击选择城市\"},on:{\"click\":function($event){_vm.showPicker = true}}}),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.showPicker),callback:function ($$v) {_vm.showPicker=$$v},expression:\"showPicker\"}},[_c('van-picker',{attrs:{\"show-toolbar\":\"\",\"columns\":_vm.areaList},on:{\"confirm\":_vm.onConfirm,\"cancel\":function($event){_vm.showPicker = false}}})],1),_c('van-field',{attrs:{\"name\":\"detail\",\"label\":\"详细地址\",\"placeholder\":\"小区楼栋/乡村名称\",\"rules\":[{ required: true, message: '请填写具体地址' }],\"clearable\":\"\"},model:{value:(_vm.detail),callback:function ($$v) {_vm.detail=$$v},expression:\"detail\"}}),_c('van-field',{attrs:{\"name\":\"isDefault\",\"label\":\"设为默认地址\"},scopedSlots:_vm._u([{key:\"input\",fn:function(){return [_c('van-switch',{attrs:{\"size\":\"20\"},model:{value:(_vm.isDefault),callback:function ($$v) {_vm.isDefault=$$v},expression:\"isDefault\"}})]},proxy:true}])}),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"danger\",\"native-type\":\"submit\"}},[_vm._v(\"保存\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <van-nav-bar\r\n      fixed\r\n      title=\"修改收货地址\"\r\n      left-arrow\r\n      @click-left=\"$router.back()\"\r\n    />\r\n    <van-form @submit=\"onSubmit\" :show-error=\"false\">\r\n      <!-- 姓名 -->\r\n      <van-field\r\n        v-model.trim=\"name\"\r\n        name=\"name\"\r\n        label=\"收货人\"\r\n        placeholder=\"名字\"\r\n        :rules=\"[{ required: true, message: '请填写收货人姓名' }]\"\r\n        clearable\r\n      />\r\n\r\n      <!-- 手机号 -->\r\n      <van-field\r\n        v-model=\"phone\"\r\n        type=\"digit\"\r\n        name=\"phone\"\r\n        label=\"手机号码\"\r\n        placeholder=\"手机号\"\r\n        :rules=\"[\r\n          {\r\n            required: true,\r\n            pattern: /^1[3-9]\\d{9}$/,\r\n            message: '请输入正确的手机号',\r\n          },\r\n        ]\"\r\n        clearable\r\n      />\r\n\r\n      <!-- 省市列表 -->\r\n      <van-field\r\n        readonly\r\n        clickable\r\n        name=\"picker\"\r\n        :value=\"area\"\r\n        label=\"所在地区\"\r\n        placeholder=\"点击选择城市\"\r\n        @click=\"showPicker = true\"\r\n      />\r\n      <van-popup v-model=\"showPicker\" position=\"bottom\">\r\n        <van-picker\r\n          show-toolbar\r\n          :columns=\"areaList\"\r\n          @confirm=\"onConfirm\"\r\n          @cancel=\"showPicker = false\"\r\n        />\r\n      </van-popup>\r\n\r\n      <!-- 详细地址 -->\r\n      <van-field\r\n        v-model=\"detail\"\r\n        name=\"detail\"\r\n        label=\"详细地址\"\r\n        placeholder=\"小区楼栋/乡村名称\"\r\n        :rules=\"[{ required: true, message: '请填写具体地址' }]\"\r\n        clearable\r\n      />\r\n\r\n      <!-- 默认地址 -->\r\n      <van-field name=\"isDefault\" label=\"设为默认地址\">\r\n        <template #input>\r\n          <van-switch v-model=\"isDefault\" size=\"20\" />\r\n        </template>\r\n      </van-field>\r\n\r\n      <!-- 提交 -->\r\n      <div style=\"margin: 16px\">\r\n        <van-button round block type=\"danger\" native-type=\"submit\"\r\n          >保存</van-button\r\n        >\r\n      </div>\r\n    </van-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { getAddDetailApi, postNewAdd } from '@/api/address'\r\n\r\nexport default {\r\n  name: 'EditAddress',\r\n\r\n  data () {\r\n    return {\r\n      addressId: this.$route.query.editedid,\r\n\r\n      name: '',\r\n      phone: '',\r\n      provId: '',\r\n      provLabel: '',\r\n      cityId: '',\r\n      cityLabel: '',\r\n      regId: '',\r\n      regLabel: '',\r\n      detail: '',\r\n      area: '',\r\n\r\n      isDefault: false,\r\n\r\n      showPicker: false\r\n\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState('areaList', ['areaList'])\r\n  },\r\n\r\n  methods: {\r\n\r\n    // 解构响应数据，初始化表单内数据\r\n    async initForm (addressId) {\r\n      // 先获取地址详情\r\n      const { data: { detail } } = await getAddDetailApi(addressId)\r\n      // console.log(detail)\r\n      const obj = detail\r\n\r\n      this.name = obj.name\r\n      this.phone = obj.phone\r\n      this.provId = obj.province_id\r\n      this.provLabel = obj.region.province\r\n      this.cityId = obj.city_id\r\n      this.cityLabel = obj.region.city\r\n      this.regId = obj.region_id\r\n      this.regLabel = obj.region.region\r\n      this.detail = obj.detail\r\n      this.area = obj.region.province + '/' + obj.region.city + '/' + obj.region.region\r\n    },\r\n\r\n    async onSubmit () {\r\n      const obj = {\r\n        addressId: this.addressId,\r\n        name: this.name,\r\n        phone: this.phone,\r\n        provId: this.provId,\r\n        provLabel: this.provLabel,\r\n        cityId: this.cityId,\r\n        cityLabel: this.cityLabel,\r\n        regId: this.regId,\r\n        regLabel: this.regLabel,\r\n        detail: this.detail\r\n      }\r\n      await postNewAdd(obj)\r\n      //   console.log(res)\r\n      this.$router.back()\r\n    },\r\n\r\n    // 确认地址选择\r\n    onConfirm (value, index) {\r\n      // console.log(value, index)\r\n      const arr = value.filter((item) => !!item)\r\n      this.area = arr.join('/')\r\n      const pIndex = index[0]\r\n      const cIndex = index[1]\r\n      const rIndex = index[2]\r\n\r\n      this.provId = this.areaList[pIndex].id\r\n      this.provLabel = value[0]\r\n      this.cityId = this.areaList[pIndex].children[cIndex].id\r\n      this.cityLabel = value[1]\r\n      this.regId = this.areaList[pIndex].children[cIndex].children[rIndex].id\r\n      this.regLabel = value[2]\r\n\r\n      this.showPicker = false\r\n    }\r\n  },\r\n\r\n  created () {\r\n    this.initForm(this.addressId)\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditAdd.vue?vue&type=template&id=2a433088&\"\nimport script from \"./EditAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./EditAdd.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","back","onSubmit","required","message","model","value","name","callback","$$v","trim","expression","pattern","phone","area","showPicker","areaList","onConfirm","detail","scopedSlots","_u","key","fn","isDefault","proxy","staticStyle","_v","staticRenderFns","data","addressId","$route","query","editedid","provId","provLabel","cityId","cityLabel","regId","regLabel","computed","mapState","methods","initForm","getAddDetailApi","obj","province_id","region","province","city_id","city","region_id","postNewAdd","index","arr","filter","item","join","pIndex","cIndex","rIndex","id","children","created","component"],"sourceRoot":""}