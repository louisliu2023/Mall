{"version":3,"file":"js/131.0274b5c0.js","mappings":"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","sources":["webpack://shopvue/./src/views/Search/SearchResult.vue","webpack://shopvue/./src/api/search.js","webpack://shopvue/src/views/Search/SearchResult.vue","webpack://shopvue/./src/views/Search/SearchResult.vue?d4f0","webpack://shopvue/./src/views/Search/SearchResult.vue?576b"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('van-search',{attrs:{\"readonly\":\"\",\"shape\":\"round\",\"background\":\"#ffffff\",\"value\":_vm.value_result},on:{\"click\":_vm.goSearchIndex}})]},proxy:true}])}),_c('div',{staticClass:\"sort-btns\"},[_c('div',{staticClass:\"sort-item\",class:{ activeSort: _vm.searchData.sortType === 'all' },on:{\"click\":_vm.sortByDefault}},[_vm._v(\" 综合 \")]),_c('div',{staticClass:\"sort-item\",class:{ activeSort: _vm.searchData.sortType === 'sales' },on:{\"click\":_vm.sortBySales}},[_vm._v(\" 销量 \")]),_c('div',{staticClass:\"sort-item\",class:{ activeSort: _vm.searchData.sortType === 'price' },on:{\"click\":_vm.sortByPrice}},[_vm._v(\" 价格\"),(_vm.searchData.sortType === 'price')?_c('van-icon',{attrs:{\"name\":_vm.searchData.sortPrice ? 'arrow-down' : 'arrow-up'}}):_vm._e()],1)]),_c('div',{staticClass:\"goods-list\"},_vm._l((_vm.searchResult),function(item,index){return _c('GoodsItem',{key:index,attrs:{\"item\":item}})}),1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import requestUtil from '@/utils/request'\r\n\r\n// obj = {\r\n//   categoryId: '',\r\n//   goodsName: '',\r\n//   page: '',\r\n//   sortPrice: '',\r\n//   sortType: ''\r\n// }\r\n\r\nexport const getSearchResultApi = (obj) => {\r\n  return requestUtil.get('/goods/list', {\r\n    params: obj\r\n  })\r\n}\r\n","<template>\r\n  <div class=\"search\">\r\n    <van-nav-bar fixed left-arrow @click-left=\"$router.back()\">\r\n      <template #title>\r\n        <van-search\r\n          readonly\r\n          shape=\"round\"\r\n          background=\"#ffffff\"\r\n          :value=\"value_result\"\r\n          @click=\"goSearchIndex\"\r\n        >\r\n        </van-search>\r\n      </template>\r\n    </van-nav-bar>\r\n\r\n    <!-- 排序选项按钮 -->\r\n    <div class=\"sort-btns\">\r\n      <div\r\n        class=\"sort-item\"\r\n        :class=\"{ activeSort: searchData.sortType === 'all' }\"\r\n        @click=\"sortByDefault\"\r\n      >\r\n        综合\r\n      </div>\r\n      <div\r\n        class=\"sort-item\"\r\n        :class=\"{ activeSort: searchData.sortType === 'sales' }\"\r\n        @click=\"sortBySales\"\r\n      >\r\n        销量\r\n      </div>\r\n      <div\r\n        class=\"sort-item\"\r\n        :class=\"{ activeSort: searchData.sortType === 'price' }\"\r\n        @click=\"sortByPrice\"\r\n      >\r\n        价格<van-icon\r\n          v-if=\"searchData.sortType === 'price'\"\r\n          :name=\"searchData.sortPrice ? 'arrow-down' : 'arrow-up'\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"goods-list\">\r\n      <GoodsItem\r\n        v-for=\"(item, index) in searchResult\"\r\n        :key=\"index\"\r\n        :item=\"item\"\r\n      ></GoodsItem>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport GoodsItem from '@/components/GoodsItem.vue'\r\n\r\nimport { getSearchResultApi } from '@/api/search'\r\n\r\nexport default {\r\n  name: 'SearchResult',\r\n  components: {\r\n    GoodsItem\r\n  },\r\n\r\n  created () {\r\n    console.log('created触发')\r\n\r\n    this.sortByDefault()\r\n    document.title = this.$route.query.search ? this.$route.query.search + '_搜索' : this.$route.query.catgryName\r\n  },\r\n\r\n  activated () {\r\n    console.log('activated触发')\r\n\r\n    const isNewValue = this.$route.query.search || this.$route.query.catgryName\r\n    if (isNewValue !== this.value_result) {\r\n      this.value_result = isNewValue\r\n      this.searchData = {\r\n        sortType: 'all',\r\n        sortPrice: 1,\r\n        // 0-价格从低到高， 1-价格从高到低 默认为 1，点一下就变成 0\r\n        categoryId: this.$route.query?.catgryId || '',\r\n        goodsName: this.$route.query?.search || '',\r\n        page: 1\r\n      }\r\n      this.sortByDefault()\r\n    }\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      // 由搜索页来则显示搜索内容，由分类页来则显示分类名\r\n      value_result: this.$route.query.search || this.$route.query.catgryName,\r\n\r\n      searchResult: [],\r\n\r\n      searchData: {\r\n        sortType: 'all',\r\n        sortPrice: 1,\r\n        // 0-价格从低到高， 1-价格从高到低 默认为 1，点一下就变成 0\r\n        categoryId: this.$route.query?.catgryId || '',\r\n        goodsName: this.$route.query?.search || '',\r\n        page: 1\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    async getSearchResult (obj) {\r\n      const res = await getSearchResultApi(obj)\r\n      this.searchResult = res.data.list.data\r\n    },\r\n\r\n    sortByDefault () {\r\n      this.searchData.sortType = 'all'\r\n      this.getSearchResult(this.searchData)\r\n    },\r\n\r\n    sortBySales () {\r\n      this.searchData.sortType = 'sales'\r\n      this.getSearchResult(this.searchData)\r\n    },\r\n\r\n    sortByPrice () {\r\n      this.searchData.sortType = 'price'\r\n      this.searchData.sortPrice = this.searchData.sortPrice === 1 ? 0 : 1\r\n      this.getSearchResult(this.searchData)\r\n    },\r\n\r\n    goSearchIndex () {\r\n      this.$router.push('/search')\r\n      // searchResult -> searchIndex : 搜索框value\r\n      this.$store.commit('search/setIndexValue', this.value_result)\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.search {\r\n  padding-top: 46px;\r\n  ::v-deep .van-icon-arrow-left {\r\n    color: #333;\r\n  }\r\n  .tool {\r\n    font-size: 24px;\r\n    height: 40px;\r\n    line-height: 40px;\r\n  }\r\n\r\n  .sort-btns {\r\n    display: flex;\r\n    height: 36px;\r\n    line-height: 36px;\r\n    .sort-item {\r\n      text-align: center;\r\n      flex: 1;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n}\r\n\r\n// 商品样式\r\n.goods-list {\r\n  background-color: #f6f6f6;\r\n}\r\n\r\n.activeSort {\r\n  color: red;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchResult.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchResult.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchResult.vue?vue&type=template&id=52552fee&scoped=true&\"\nimport script from \"./SearchResult.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchResult.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchResult.vue?vue&type=style&index=0&id=52552fee&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"52552fee\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","back","scopedSlots","_u","key","fn","value_result","goSearchIndex","proxy","class","activeSort","searchData","sortType","sortByDefault","_v","sortBySales","sortByPrice","sortPrice","_e","_l","searchResult","item","index","staticRenderFns","getSearchResultApi","obj","requestUtil","get","params","name","components","GoodsItem","created","console","log","document","title","$route","query","search","catgryName","activated","isNewValue","categoryId","catgryId","goodsName","page","data","methods","getSearchResult","res","list","push","$store","commit","component"],"sourceRoot":""}