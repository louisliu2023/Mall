"use strict";(self["webpackChunkshopvue"]=self["webpackChunkshopvue"]||[]).push([[131],{6131:function(t,e,s){s.r(e),s.d(e,{default:function(){return y}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[e("van-nav-bar",{attrs:{fixed:"","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}},scopedSlots:t._u([{key:"title",fn:function(){return[e("van-search",{attrs:{readonly:"",shape:"round",background:"#ffffff",value:t.value_result},on:{click:t.goSearchIndex}})]},proxy:!0}])}),e("div",{staticClass:"sort-btns"},[e("div",{staticClass:"sort-item",class:{activeSort:"all"===t.searchData.sortType},on:{click:t.sortByDefault}},[t._v(" 综合 ")]),e("div",{staticClass:"sort-item",class:{activeSort:"sales"===t.searchData.sortType},on:{click:t.sortBySales}},[t._v(" 销量 ")]),e("div",{staticClass:"sort-item",class:{activeSort:"price"===t.searchData.sortType},on:{click:t.sortByPrice}},[t._v(" 价格"),"price"===t.searchData.sortType?e("van-icon",{attrs:{name:t.searchData.sortPrice?"arrow-down":"arrow-up"}}):t._e()],1)]),e("div",{staticClass:"goods-list"},t._l(t.searchResult,(function(t,s){return e("GoodsItem",{key:s,attrs:{item:t}})})),1)],1)},r=[],c=(s(7658),s(8595)),o=s(4471);const i=t=>o.Z.get("/goods/list",{params:t});var h={name:"SearchResult",components:{GoodsItem:c.Z},created(){console.log("created触发"),this.sortByDefault(),document.title=this.$route.query.search?this.$route.query.search+"_搜索":this.$route.query.catgryName},activated(){console.log("activated触发");const t=this.$route.query.search||this.$route.query.catgryName;t!==this.value_result&&(this.value_result=t,this.searchData={sortType:"all",sortPrice:1,categoryId:this.$route.query?.catgryId||"",goodsName:this.$route.query?.search||"",page:1},this.sortByDefault())},data(){return{value_result:this.$route.query.search||this.$route.query.catgryName,searchResult:[],searchData:{sortType:"all",sortPrice:1,categoryId:this.$route.query?.catgryId||"",goodsName:this.$route.query?.search||"",page:1}}},methods:{async getSearchResult(t){const e=await i(t);this.searchResult=e.data.list.data},sortByDefault(){this.searchData.sortType="all",this.getSearchResult(this.searchData)},sortBySales(){this.searchData.sortType="sales",this.getSearchResult(this.searchData)},sortByPrice(){this.searchData.sortType="price",this.searchData.sortPrice=1===this.searchData.sortPrice?0:1,this.getSearchResult(this.searchData)},goSearchIndex(){this.$router.push("/search"),this.$store.commit("search/setIndexValue",this.value_result)}}},u=h,l=s(1001),n=(0,l.Z)(u,a,r,!1,null,"52552fee",null),y=n.exports}}]);
//# sourceMappingURL=131.0274b5c0.js.map