"use strict";(self["webpackChunkshopvue"]=self["webpackChunkshopvue"]||[]).push([[111],{2111:function(t,s,e){e.r(s),e.d(s,{default:function(){return l}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"page-body"},[s("van-nav-bar",{attrs:{fixed:"",title:"评价订单","left-arrow":""},on:{"click-left":function(s){return t.$router.back()}}}),s("div",{staticClass:"goods-list"},t._l(t.goodsList,(function(e,a){return s("div",{key:a,staticClass:"list-item"},[s("div",{staticClass:"goods-info"},[s("div",{staticClass:"goods-img"},[s("img",{attrs:{src:e.goods_image,alt:""}})]),s("div",{staticClass:"goods-content text-ellipsis-2"},[t._v(" "+t._s(e.goods_name)+" ")]),s("div",{staticClass:"goods-trade"},[s("p",[t._v("¥ "+t._s(e.total_pay_price))]),s("p",[t._v("x "+t._s(e.total_num))])])]),s("div",{staticClass:"score-row"},[s("div",{staticClass:"score-item score-praise",class:{active:10==t.formData[a].score},on:{click:function(s){return t.setScore(a,10)}}},[t._m(0,!0)]),s("div",{staticClass:"score-item score-review",class:{active:20==t.formData[a].score},on:{click:function(s){return t.setScore(a,20)}}},[t._m(1,!0)]),s("div",{staticClass:"score-item score-negative",class:{active:30==t.formData[a].score},on:{click:function(s){return t.setScore(a,30)}}},[t._m(2,!0)])]),s("div",{staticClass:"form-content"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData[a].content,expression:"formData[index].content"}],staticClass:"textarea",attrs:{type:"text",maxlength:"500",placeholder:"请输入评价内容 (留空则不评价)"},domProps:{value:t.formData[a].content},on:{input:function(s){s.target.composing||t.$set(t.formData[a],"content",s.target.value)}}})]),s("van-uploader",{attrs:{"after-read":s=>{t.uploadImage(s,a)},multiple:""},model:{value:t.formData[a].imageList,callback:function(s){t.$set(t.formData[a],"imageList",s)},expression:"formData[index].imageList"}})],1)})),0),s("div",{staticClass:"footer-fixed"},[s("div",{staticClass:"btn-wrapper"},[s("div",{staticClass:"btn-item btn-item-main",on:{click:function(s){return t.submitComment()}}},[t._v(" 确认提交 ")])])])],1)},o=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"score"},[s("span",{staticClass:"score-icon iconfont icon-haoping"}),s("span",{staticClass:"score-text"},[t._v("好评")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"score"},[s("span",{staticClass:"score-icon iconfont icon-zhongping"}),s("span",{staticClass:"score-text"},[t._v("中评")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"score"},[s("span",{staticClass:"score-icon iconfont icon-chaping"}),s("span",{staticClass:"score-text"},[t._v("差评")])])}],r=(e(7658),e(2933)),i={name:"AddComment",data(){return{orderId:this.$route.query.orderId,goodsList:[],formData:[]}},methods:{async getGoodsList(){const{data:{goodsList:t}}=await(0,r.eN)(this.orderId);this.goodsList=t,this.formData=this.goodsList.map((t=>({goods_id:t.goods_id,order_goods_id:t.order_goods_id,score:10,content:"",imageList:[],uploaded:[]})))},setScore(t,s){this.formData[t].score=s},async uploadImage(t,s){const e=new FormData;e.append("file",t.file);const{data:{fileInfo:a}}=await(0,r.KH)(e);this.formData[s].uploaded.push(a.file_id)},async submitComment(){await(0,r.RH)(this.orderId,this.formData),this.$router.replace(`/orderdetail?orderId=${this.orderId}`)}},created(){this.getGoodsList()}},n=i,c=e(1001),d=(0,c.Z)(n,a,o,!1,null,"bb2e5962",null),l=d.exports},2933:function(t,s,e){e.d(s,{F1:function(){return r},KH:function(){return d},N1:function(){return u},RH:function(){return l},WC:function(){return n},eN:function(){return c},l$:function(){return o},rC:function(){return i}});var a=e(4471);const o=(t,s)=>(0,a.Z)({url:"/order/list",params:{dataType:t,page:s}}),r=t=>(0,a.Z)({method:"post",url:"/order/cancel",data:{orderId:t}}),i=(t,s)=>(0,a.Z)({url:"/order/pay",params:{orderId:t,payType:s}}),n=t=>(0,a.Z)({method:"post",url:"/order/receipt",data:{orderId:t}}),c=t=>(0,a.Z)({url:"/order.comment/list",params:{orderId:t}}),d=t=>(0,a.Z)({method:"post",url:"/upload/image",data:t}),l=(t,s)=>(0,a.Z)({method:"post",url:"/order.comment/submit",data:{orderId:t,form:s}}),u=t=>(0,a.Z)({url:"/order/detail",params:{orderId:t}})}}]);
//# sourceMappingURL=111.20342134.js.map