"use strict";(self["webpackChunkshopvue"]=self["webpackChunkshopvue"]||[]).push([[162],{8162:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-body"},[e("van-nav-bar",{attrs:{fixed:"",title:"售后服务","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),e("div",{staticClass:"goods-detail dis-flex"},[e("div",{staticClass:"left"},[e("img",{staticClass:"goods-image",attrs:{src:t.goods.goods_image}})]),e("div",{staticClass:"right"},[e("div",{staticClass:"goods-name"},[e("span",[t._v(t._s(t.goods.goods_name))])]),e("div",{staticClass:"dis-flex goods-num"},[e("span",{staticClass:"t-r"},[t._v("×"+t._s(t.goods.total_num))])])])]),e("div",{staticClass:"row-service"},[e("div",{staticClass:"row-title"},[t._v("服务类型")]),e("div",{staticClass:"service-switch dis-flex"},t._l(t.RefundType,(function(a,o){return e("div",{key:o,staticClass:"switch-item",class:{active:t.formData.type==a.value},on:{click:function(e){return t.onSwitchService(a.value)}}},[t._v(" "+t._s(a.name)+" ")])})),0)]),e("div",{staticClass:"row-textarea"},[e("div",{staticClass:"row-title"},[t._v("申请原因")]),e("div",{staticClass:"content"},[e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.content,expression:"formData.content",modifiers:{trim:!0}}],staticClass:"textarea",attrs:{maxlength:"2000",placeholder:"请详细填写申请原因，注意保持商品的完好，建议您先与卖家沟通",placeholderStyle:"color:#ccc"},domProps:{value:t.formData.content},on:{input:function(e){e.target.composing||t.$set(t.formData,"content",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),10==t.formData.type?e("div",{staticClass:"row-money dis-flex"},[e("div",{staticClass:"row-title"},[t._v("退款金额")]),e("div",{staticClass:"money"},[t._v("￥"+t._s(t.goods.total_pay_price))])]):t._e(),e("div",{staticClass:"row-voucher"},[e("div",{staticClass:"row-title"},[t._v("上传凭证 (最多6张)")]),e("van-uploader",{attrs:{"after-read":t.uploadImage,multiple:""},model:{value:t.imageList,callback:function(e){t.imageList=e},expression:"imageList"}})],1),e("div",{staticClass:"footer-fixed"},[e("div",{staticClass:"btn-wrapper"},[e("div",{staticClass:"btn-item btn-item-main",on:{click:function(e){return t.onSubmitRefund()}}},[t._v(" 确认提交 ")])])])],1)},r=[],s=(a(8146),a(8848)),i=(a(7658),a(2360)),n=a(2933),d={name:"ApplyRefund",data(){return{orderGoodsId:this.$route.query.orderGoodsId,goods:{},formData:{images:[],type:10,content:""},RefundType:[{key:"RETURN",name:"退货退款",value:10},{key:"EXCHANGE",name:"换货",value:20}],imageList:[]}},methods:{async getRefundGoodsDetail(){const{data:{goods:t}}=await(0,i.i3)(this.orderGoodsId);this.goods=t},onSwitchService(t){this.formData.type=t},async uploadImage(t){const e=new FormData;e.append("file",t.file);const{data:{fileInfo:a}}=await(0,n.KH)(e);this.formData.images.push(a.file_id)},async onSubmitRefund(){this.formData.content?(await(0,i.zA)(this.orderGoodsId,this.formData),(0,s.Z)("已提交申请"),this.$router.replace("/refund")):(0,s.Z)("请输入申请原因")}},created(){this.getRefundGoodsDetail()}},c=d,l=a(1001),u=(0,l.Z)(c,o,r,!1,null,"aa261d64",null),m=u.exports},2933:function(t,e,a){a.d(e,{F1:function(){return s},KH:function(){return c},N1:function(){return u},RH:function(){return l},WC:function(){return n},eN:function(){return d},l$:function(){return r},rC:function(){return i}});var o=a(4471);const r=(t,e)=>(0,o.Z)({url:"/order/list",params:{dataType:t,page:e}}),s=t=>(0,o.Z)({method:"post",url:"/order/cancel",data:{orderId:t}}),i=(t,e)=>(0,o.Z)({url:"/order/pay",params:{orderId:t,payType:e}}),n=t=>(0,o.Z)({method:"post",url:"/order/receipt",data:{orderId:t}}),d=t=>(0,o.Z)({url:"/order.comment/list",params:{orderId:t}}),c=t=>(0,o.Z)({method:"post",url:"/upload/image",data:t}),l=(t,e)=>(0,o.Z)({method:"post",url:"/order.comment/submit",data:{orderId:t,form:e}}),u=t=>(0,o.Z)({url:"/order/detail",params:{orderId:t}})},2360:function(t,e,a){a.d(e,{$w:function(){return i},i3:function(){return r},zA:function(){return s}});var o=a(4471);const r=t=>(0,o.Z)({url:"/refund/goods",params:{orderGoodsId:t}}),s=(t,e)=>(0,o.Z)({method:"post",url:"/refund/apply",data:{orderGoodsId:t,form:e}}),i=(t,e)=>o.Z.get("/refund/list",{state:t,page:e})}}]);
//# sourceMappingURL=162.e34a92e6.js.map